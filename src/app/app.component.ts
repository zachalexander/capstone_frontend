import { Component, OnInit, Input, Output, EventEmitter, ViewChild, ÉµgetDebugNode__POST_R3__} from '@angular/core';
import {} from 'googlemaps';
import { FlaskConnectService } from './services/flask-connect.service'
import MeasureTool from 'measuretool-googlemaps-v3';
import {FormBuilder, FormGroup, Validators} from '@angular/forms';
import { MatStepper } from '@angular/material/stepper';
import { CookieService } from 'ngx-cookie-service';
import * as d3 from 'd3';
import { map } from 'rxjs/operators';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})


export class AppComponent implements OnInit {
  title = 'Solar Calculator';
  searchFormGroup: FormGroup;
  drawFormGroup: FormGroup;
  firstFormGroup: FormGroup;
  secondFormGroup: FormGroup;
  isEditable = false;
  confirm = false;
  mobile;
  postError = false;
  dataset = [
    {
        "I=$15k, r=.175": -15000,
        "I=$15k, r=.2": -15000,
        "I=$25k, r=.175": -25000,
        "I=$25k, r=.2": -25000,
        "Regular Grid Service": 0
    },
    {
        "I=$15k, r=.175": -14930.856779063235,
        "I=$15k, r=.2": -14875.074852017404,
        "I=$25k, r=.175": -24915.345936858535,
        "I=$25k, r=.2": -24887.853829975295,
        "Regular Grid Service": -159.5917386
    },
    {
        "I=$15k, r=.175": -14769.77870420586,
        "I=$15k, r=.2": -14671.93450129753,
        "I=$25k, r=.175": -24727.01218739214,
        "I=$25k, r=.2": -24628.971253617714,
        "Regular Grid Service": -313.401714633
    },
    {
        "I=$15k, r=.175": -14394.15963317165,
        "I=$15k, r=.2": -14284.478781653346,
        "I=$25k, r=.175": -24402.837839988544,
        "I=$25k, r=.2": -24216.636041348258,
        "Regular Grid Service": -514.29232549044
    },
    {
        "I=$15k, r=.175": -13780.352392244058,
        "I=$15k, r=.2": -13642.63857557895,
        "I=$25k, r=.175": -23873.71683590194,
        "I=$25k, r=.2": -23578.927456419373,
        "Regular Grid Service": -678.0394510153488
    },
    {
        "I=$15k, r=.175": -13151.432479724599,
        "I=$15k, r=.2": -12898.997276156584,
        "I=$25k, r=.175": -23235.13776102307,
        "I=$25k, r=.2": -22774.94570400738,
        "Regular Grid Service": -816.130365583928
    },
    {
        "I=$15k, r=.175": -12453.347524201956,
        "I=$15k, r=.2": -12085.749347206976,
        "I=$25k, r=.175": -22556.24557858945,
        "I=$25k, r=.2": -21995.188892886,
        "Regular Grid Service": -996.7122896775934
    },
    {
        "I=$15k, r=.175": -11768.786170260684,
        "I=$15k, r=.2": -11462.36861803358,
        "I=$25k, r=.175": -21827.34633394711,
        "I=$25k, r=.2": -21221.926378507815,
        "Regular Grid Service": -1243.984751498846
    },
    {
        "I=$15k, r=.175": -11138.620052917846,
        "I=$15k, r=.2": -10774.779031852271,
        "I=$25k, r=.175": -21180.237050540687,
        "I=$25k, r=.2": -20583.803819457964,
        "Regular Grid Service": -1454.5646325955001
    },
    {
        "I=$15k, r=.175": -10594.57994812369,
        "I=$15k, r=.2": -10147.795255959401,
        "I=$25k, r=.175": -20698.645948559846,
        "I=$25k, r=.2": -20012.257506503705,
        "Regular Grid Service": -1608.7897893672805
    },
    {
        "I=$15k, r=.175": -10358.270675397274,
        "I=$15k, r=.2": -9860.03993888681,
        "I=$25k, r=.175": -20398.860309667354,
        "I=$25k, r=.2": -19705.015311428066,
        "Regular Grid Service": -1784.5147510102192
    },
    {
        "I=$15k, r=.175": -10300.496168230182,
        "I=$15k, r=.2": -9757.502899525858,
        "I=$25k, r=.175": -20329.97669356931,
        "I=$25k, r=.2": -19551.557747110415,
        "Regular Grid Service": -1997.474441396104
    },
    {
        "I=$15k, r=.175": -10327.430636480187,
        "I=$15k, r=.2": -9778.091301112338,
        "I=$25k, r=.175": -20347.158815625087,
        "I=$25k, r=.2": -19548.934105251737,
        "Regular Grid Service": -2243.9364370554717
    },
    {
        "I=$15k, r=.175": -10240.123366423271,
        "I=$15k, r=.2": -9660.6169614074,
        "I=$25k, r=.175": -20264.63838293163,
        "I=$25k, r=.2": -19447.751991739296,
        "Regular Grid Service": -2403.528175655472
    },
    {
        "I=$15k, r=.175": -10066.180687109134,
        "I=$15k, r=.2": -9414.473054983324,
        "I=$25k, r=.175": -20105.20130963827,
        "I=$25k, r=.2": -19201.694290952917,
        "Regular Grid Service": -2557.338151688472
    },
    {
        "I=$15k, r=.175": -9736.754714473997,
        "I=$15k, r=.2": -8990.319682709052,
        "I=$25k, r=.175": -19759.14426335856,
        "I=$25k, r=.2": -18862.155353559265,
        "Regular Grid Service": -2758.228762545912
    },
    {
        "I=$15k, r=.175": -9244.354930377298,
        "I=$15k, r=.2": -8546.633773309062,
        "I=$25k, r=.175": -19217.567943101843,
        "I=$25k, r=.2": -18214.522558227978,
        "Regular Grid Service": -2921.975888070821
    },
    {
        "I=$15k, r=.175": -8565.028076778515,
        "I=$15k, r=.2": -7786.300338061843,
        "I=$25k, r=.175": -18580.95174436397,
        "I=$25k, r=.2": -17435.520175560316,
        "Regular Grid Service": -3060.0668026394
    },
    {
        "I=$15k, r=.175": -7874.141289801452,
        "I=$15k, r=.2": -6980.633874521864,
        "I=$25k, r=.175": -17944.307818109453,
        "I=$25k, r=.2": -16681.555920706833,
        "Regular Grid Service": -3240.6487267330654
    },
    {
        "I=$15k, r=.175": -7197.999809494773,
        "I=$15k, r=.2": -6172.974008174751,
        "I=$25k, r=.175": -17339.729818566237,
        "I=$25k, r=.2": -15859.095874051167,
        "Regular Grid Service": -3487.9211885543177
    },
    {
        "I=$15k, r=.175": -6565.658651325262,
        "I=$15k, r=.2": -5371.406147496781,
        "I=$25k, r=.175": -16735.512991661966,
        "I=$25k, r=.2": -15067.632244292137,
        "Regular Grid Service": -3698.501069650972
    },
    {
        "I=$15k, r=.175": -6075.583739488541,
        "I=$15k, r=.2": -4829.245318899941,
        "I=$25k, r=.175": -16206.161900890316,
        "I=$25k, r=.2": -14462.939000473867,
        "Regular Grid Service": -3852.7262264227525
    },
    {
        "I=$15k, r=.175": -5848.035379979,
        "I=$15k, r=.2": -4455.357816191657,
        "I=$25k, r=.175": -15920.053092207356,
        "I=$25k, r=.2": -14188.01706360324,
        "Regular Grid Service": -4028.4511880656914
    },
    {
        "I=$15k, r=.175": -5798.952250859513,
        "I=$15k, r=.2": -4338.999617793331,
        "I=$25k, r=.175": -15795.578721705244,
        "I=$25k, r=.2": -14069.587278961659,
        "Regular Grid Service": -4241.4108784515765
    },
    {
        "I=$15k, r=.175": -5837.723837017766,
        "I=$15k, r=.2": -4343.344252561447,
        "I=$25k, r=.175": -15792.185218332204,
        "I=$25k, r=.2": -14039.086842223785,
        "Regular Grid Service": -4487.872874110944
    },
    {
        "I=$15k, r=.175": -5781.618654486829,
        "I=$15k, r=.2": -4207.459882290486,
        "I=$25k, r=.175": -15714.736068187798,
        "I=$25k, r=.2": -13926.113378713413,
        "Regular Grid Service": -4647.4646127109445
    },
    {
        "I=$15k, r=.175": -5597.606875374353,
        "I=$15k, r=.2": -3957.0012687314165,
        "I=$25k, r=.175": -15539.988139438214,
        "I=$25k, r=.2": -13692.887198645436,
        "Regular Grid Service": -4801.274588743944
    },
    {
        "I=$15k, r=.175": -5261.219152500382,
        "I=$15k, r=.2": -3541.720909927211,
        "I=$25k, r=.175": -15220.360526043754,
        "I=$25k, r=.2": -13262.496724760998,
        "Regular Grid Service": -5002.165199601384
    },
    {
        "I=$15k, r=.175": -4785.79209477118,
        "I=$15k, r=.2": -2941.941181485382,
        "I=$25k, r=.175": -14672.23922423712,
        "I=$25k, r=.2": -12659.632486411341,
        "Regular Grid Service": -5165.912325126294
    },
    {
        "I=$15k, r=.175": -4155.718072876978,
        "I=$15k, r=.2": -2132.414653715852,
        "I=$25k, r=.175": -14008.728837359658,
        "I=$25k, r=.2": -11857.118878895955,
        "Regular Grid Service": -5304.003239694873
    },
    {
        "I=$15k, r=.175": -3487.1061641629335,
        "I=$15k, r=.2": -1454.9933087331306,
        "I=$25k, r=.175": -13333.09897450334,
        "I=$25k, r=.2": -11096.778387100258,
        "Regular Grid Service": -5484.585163788538
    },
    {
        "I=$15k, r=.175": -2669.3049248419557,
        "I=$15k, r=.2": -666.6634100135788,
        "I=$25k, r=.175": -12643.237332721339,
        "I=$25k, r=.2": -10289.803340371636,
        "Regular Grid Service": -5731.85762560979
    },
    {
        "I=$15k, r=.175": -2003.3811521985301,
        "I=$15k, r=.2": 47.43460495061481,
        "I=$25k, r=.175": -11971.035319196228,
        "I=$25k, r=.2": -9564.259290835194,
        "Regular Grid Service": -5942.437506706445
    },
    {
        "I=$15k, r=.175": -1525.1352096469016,
        "I=$15k, r=.2": 616.470488357418,
        "I=$25k, r=.175": -11514.622507686276,
        "I=$25k, r=.2": -8966.863813282327,
        "Regular Grid Service": -6096.662663478225
    },
    {
        "I=$15k, r=.175": -1309.8376102756474,
        "I=$15k, r=.2": 942.4102339657218,
        "I=$25k, r=.175": -11246.323203429813,
        "I=$25k, r=.2": -8691.33642883304,
        "Regular Grid Service": -6272.387625121164
    },
    {
        "I=$15k, r=.175": -1240.759695033279,
        "I=$15k, r=.2": 1032.575144074302,
        "I=$25k, r=.175": -11175.185353730532,
        "I=$25k, r=.2": -8592.28474518869,
        "Regular Grid Service": -6485.347315507049
    },
    {
        "I=$15k, r=.175": -1298.1733919820958,
        "I=$15k, r=.2": 1041.4477237557048,
        "I=$25k, r=.175": -11194.99091067114,
        "I=$25k, r=.2": -8563.161551863923,
        "Regular Grid Service": -6731.809311166417
    },
    {
        "I=$15k, r=.175": -1210.439271937008,
        "I=$15k, r=.2": 1137.6921203521258,
        "I=$25k, r=.175": -11096.16371004211,
        "I=$25k, r=.2": -8448.166241388077,
        "Regular Grid Service": -6891.401049766417
    },
    {
        "I=$15k, r=.175": -1016.4799078113558,
        "I=$15k, r=.2": 1345.9280475871801,
        "I=$25k, r=.175": -10883.181666843531,
        "I=$25k, r=.2": -8199.279154847221,
        "Regular Grid Service": -7045.211025799416
    },
    {
        "I=$15k, r=.175": -696.2409291867195,
        "I=$15k, r=.2": 1720.002977475179,
        "I=$25k, r=.175": -10582.620961786122,
        "I=$25k, r=.2": -7788.970702936977,
        "Regular Grid Service": -7246.1016366568565
    },
    {
        "I=$15k, r=.175": -184.12998242317417,
        "I=$15k, r=.2": 2237.8866851832686,
        "I=$25k, r=.175": -10089.901747904072,
        "I=$25k, r=.2": -7329.331313988352,
        "Regular Grid Service": -7409.848762181766
    },
    {
        "I=$15k, r=.175": 549.2964412126962,
        "I=$15k, r=.2": 2964.755488967242,
        "I=$25k, r=.175": -9370.450003161914,
        "I=$25k, r=.2": -6580.879757467765,
        "Regular Grid Service": -7547.939676750345
    },
    {
        "I=$15k, r=.175": 1226.4379877078222,
        "I=$15k, r=.2": 3712.259016988334,
        "I=$25k, r=.175": -8710.98763390414,
        "I=$25k, r=.2": -5770.726156748294,
        "Regular Grid Service": -7728.52160084401
    },
    {
        "I=$15k, r=.175": 1901.126431076701,
        "I=$15k, r=.2": 4572.170693058738,
        "I=$25k, r=.175": -8085.383321008918,
        "I=$25k, r=.2": -4934.379861033511,
        "Regular Grid Service": -7975.794062665263
    },
    {
        "I=$15k, r=.175": 2666.0743823217404,
        "I=$15k, r=.2": 5312.218238378026,
        "I=$25k, r=.175": -7457.4847887312435,
        "I=$25k, r=.2": -4184.543833135053,
        "Regular Grid Service": -8186.373943761917
    },
    {
        "I=$15k, r=.175": 3154.564417154806,
        "I=$15k, r=.2": 5856.687782707935,
        "I=$25k, r=.175": -6998.512168560354,
        "I=$25k, r=.2": -3598.671390442247,
        "Regular Grid Service": -8340.599100533698
    },
    {
        "I=$15k, r=.175": 3438.342603159213,
        "I=$15k, r=.2": 6223.932922622328,
        "I=$25k, r=.175": -6728.119243871274,
        "I=$25k, r=.2": -3280.03176929477,
        "Regular Grid Service": -8516.324062176636
    },
    {
        "I=$15k, r=.175": 3511.5792430745773,
        "I=$15k, r=.2": 6316.299361676499,
        "I=$25k, r=.175": -6689.8918012311515,
        "I=$25k, r=.2": -3221.4584397184008,
        "Regular Grid Service": -8729.283752562522
    },
    {
        "I=$15k, r=.175": 3503.4656808857335,
        "I=$15k, r=.2": 6351.758376278869,
        "I=$25k, r=.175": -6692.544704009545,
        "I=$25k, r=.2": -3182.1548337015934,
        "Regular Grid Service": -8975.745748221889
    },
    {
        "I=$15k, r=.175": 3586.1326313237737,
        "I=$15k, r=.2": 6475.560280027495,
        "I=$25k, r=.175": -6601.214338173074,
        "I=$25k, r=.2": -3085.437759753388,
        "Regular Grid Service": -9135.337486821889
    },
    {
        "I=$15k, r=.175": 3730.3007030710432,
        "I=$15k, r=.2": 6686.650565158536,
        "I=$25k, r=.175": -6415.159915568613,
        "I=$25k, r=.2": -2872.5513699213197,
        "Regular Grid Service": -9289.14746285489
    },
    {
        "I=$15k, r=.175": 4008.810076230576,
        "I=$15k, r=.2": 7117.9621263813,
        "I=$25k, r=.175": -6158.910541457311,
        "I=$25k, r=.2": -2441.741725050039,
        "Regular Grid Service": -9490.038073712329
    },
    {
        "I=$15k, r=.175": 4467.213447751443,
        "I=$15k, r=.2": 7751.285246153449,
        "I=$25k, r=.175": -5642.380130832682,
        "I=$25k, r=.2": -1905.0190648303706,
        "Regular Grid Service": -9653.785199237238
    },
    {
        "I=$15k, r=.175": 5096.359057009348,
        "I=$15k, r=.2": 8580.109747119179,
        "I=$25k, r=.175": -5021.6319140474825,
        "I=$25k, r=.2": -1119.519604376248,
        "Regular Grid Service": -9791.876113805818
    },
    {
        "I=$15k, r=.175": 5764.387965495413,
        "I=$15k, r=.2": 9361.061333469235,
        "I=$25k, r=.175": -4294.042053116608,
        "I=$25k, r=.2": -333.13629999219495,
        "Regular Grid Service": -9972.458037899483
    },
    {
        "I=$15k, r=.175": 6491.22118142814,
        "I=$15k, r=.2": 10265.64459898858,
        "I=$25k, r=.175": -3635.7058423494555,
        "I=$25k, r=.2": 537.4292798075069,
        "Regular Grid Service": -10219.730499720736
    },
    {
        "I=$15k, r=.175": 7098.890000384271,
        "I=$15k, r=.2": 11019.288797637068,
        "I=$25k, r=.175": -3052.6013238396176,
        "I=$25k, r=.2": 1300.8161679888199,
        "Regular Grid Service": -10430.31038081739
    },
    {
        "I=$15k, r=.175": 7534.6479740694795,
        "I=$15k, r=.2": 11699.884215826278,
        "I=$25k, r=.175": -2557.4842849270367,
        "I=$25k, r=.2": 1940.9993953167766,
        "Regular Grid Service": -10584.53553758917
    },
    {
        "I=$15k, r=.175": 7842.4728461401555,
        "I=$15k, r=.2": 12089.724690601064,
        "I=$25k, r=.175": -2370.1798441632804,
        "I=$25k, r=.2": 2275.399129409782,
        "Regular Grid Service": -10760.260499232108
    },
    {
        "I=$15k, r=.175": 7906.754101117487,
        "I=$15k, r=.2": 12162.187026161935,
        "I=$25k, r=.175": -2279.3536843584448,
        "I=$25k, r=.2": 2405.8806467774266,
        "Regular Grid Service": -10973.220189617994
    },
    {
        "I=$15k, r=.175": 7839.817719681849,
        "I=$15k, r=.2": 12183.366452424254,
        "I=$25k, r=.175": -2301.9631031168824,
        "I=$25k, r=.2": 2435.6970413883805,
        "Regular Grid Service": -11219.682185277361
    },
    {
        "I=$15k, r=.175": 7918.148533821615,
        "I=$15k, r=.2": 12268.54896803924,
        "I=$25k, r=.175": -2237.4384935961807,
        "I=$25k, r=.2": 2558.0841804902284,
        "Regular Grid Service": -11379.273923877361
    },
    {
        "I=$15k, r=.175": 8118.864555798497,
        "I=$15k, r=.2": 12497.000164445564,
        "I=$25k, r=.175": -2069.5255244387763,
        "I=$25k, r=.2": 2774.3303339156328,
        "Regular Grid Service": -11533.083899910362
    },
    {
        "I=$15k, r=.175": 8449.543707341181,
        "I=$15k, r=.2": 12896.756775012576,
        "I=$25k, r=.175": -1691.968302366287,
        "I=$25k, r=.2": 3201.87458608254,
        "Regular Grid Service": -11733.9745107678
    },
    {
        "I=$15k, r=.175": 8937.764397802363,
        "I=$15k, r=.2": 13521.231710771304,
        "I=$25k, r=.175": -1208.0535580557444,
        "I=$25k, r=.2": 3767.758235908641,
        "Regular Grid Service": -11897.72163629271
    },
    {
        "I=$15k, r=.175": 9488.272889893182,
        "I=$15k, r=.2": 14346.481749360382,
        "I=$25k, r=.175": -625.5900044415052,
        "I=$25k, r=.2": 4563.3283755277525,
        "Regular Grid Service": -12035.81255086129
    },
    {
        "I=$15k, r=.175": 10154.06674591602,
        "I=$15k, r=.2": 15070.182766058218,
        "I=$25k, r=.175": 85.23108468432997,
        "I=$25k, r=.2": 5324.649068529715,
        "Regular Grid Service": -12216.394474954956
    },
    {
        "I=$15k, r=.175": 10791.635982622138,
        "I=$15k, r=.2": 15941.13740827583,
        "I=$25k, r=.175": 682.9992815776036,
        "I=$25k, r=.2": 6182.1405796998415,
        "Regular Grid Service": -12463.666936776208
    },
    {
        "I=$15k, r=.175": 11443.597849305757,
        "I=$15k, r=.2": 16724.557796916695,
        "I=$25k, r=.175": 1282.0332403639795,
        "I=$25k, r=.2": 6846.24964341684,
        "Regular Grid Service": -12674.246817872861
    },
    {
        "I=$15k, r=.175": 12006.487888517027,
        "I=$15k, r=.2": 17369.927528220545,
        "I=$25k, r=.175": 1780.7928837160985,
        "I=$25k, r=.2": 7388.807511657775,
        "Regular Grid Service": -12828.471974644643
    },
    {
        "I=$15k, r=.175": 12308.157233888509,
        "I=$15k, r=.2": 17700.886939212738,
        "I=$25k, r=.175": 2060.2221163695453,
        "I=$25k, r=.2": 7741.6035525361995,
        "Regular Grid Service": -13004.19693628758
    },
    {
        "I=$15k, r=.175": 12425.9230277799,
        "I=$15k, r=.2": 17781.795253884226,
        "I=$25k, r=.175": 2106.966761536483,
        "I=$25k, r=.2": 7836.402757765035,
        "Regular Grid Service": -13217.156626673466
    },
    {
        "I=$15k, r=.175": 12420.74255088676,
        "I=$15k, r=.2": 17750.924991501557,
        "I=$25k, r=.175": 2076.13111959242,
        "I=$25k, r=.2": 7838.064142636825,
        "Regular Grid Service": -13463.618622332833
    },
    {
        "I=$15k, r=.175": 12485.344188209145,
        "I=$15k, r=.2": 17824.622591843363,
        "I=$25k, r=.175": 2138.5419655691,
        "I=$25k, r=.2": 7932.956588153055,
        "Regular Grid Service": -13623.210360932833
    },
    {
        "I=$15k, r=.175": 12612.382227067828,
        "I=$15k, r=.2": 18031.419346031813,
        "I=$25k, r=.175": 2312.3363108788126,
        "I=$25k, r=.2": 8161.293359780668,
        "Regular Grid Service": -13777.020336965834
    },
    {
        "I=$15k, r=.175": 12922.182288046171,
        "I=$15k, r=.2": 18393.54590635086,
        "I=$25k, r=.175": 2677.3513739517443,
        "I=$25k, r=.2": 8620.006878715678,
        "Regular Grid Service": -13977.910947823273
    },
    {
        "I=$15k, r=.175": 13360.460092250256,
        "I=$15k, r=.2": 18901.308201799784,
        "I=$25k, r=.175": 3174.620379730921,
        "I=$25k, r=.2": 9315.566013997066,
        "Regular Grid Service": -14141.658073348182
    },
    {
        "I=$15k, r=.175": 14013.849341900173,
        "I=$15k, r=.2": 19742.51739529916,
        "I=$25k, r=.175": 3796.900106430977,
        "I=$25k, r=.2": 10064.679760318655,
        "Regular Grid Service": -14279.748987916762
    },
    {
        "I=$15k, r=.175": 14654.157630811847,
        "I=$15k, r=.2": 20574.7053555912,
        "I=$25k, r=.175": 4509.713359160405,
        "I=$25k, r=.2": 10785.710850494119,
        "Regular Grid Service": -14460.330912010428
    },
    {
        "I=$15k, r=.175": 15355.35117908168,
        "I=$15k, r=.2": 21447.324094517997,
        "I=$25k, r=.175": 5272.950622031272,
        "I=$25k, r=.2": 11671.715270443903,
        "Regular Grid Service": -14707.60337383168
    },
    {
        "I=$15k, r=.175": 15933.467746845858,
        "I=$15k, r=.2": 22241.918747228705,
        "I=$25k, r=.175": 5878.132312784255,
        "I=$25k, r=.2": 12436.437503794348,
        "Regular Grid Service": -14918.183254928334
    },
    {
        "I=$15k, r=.175": 16446.33045704374,
        "I=$15k, r=.2": 22864.081643270125,
        "I=$25k, r=.175": 6369.6575362668755,
        "I=$25k, r=.2": 12961.03175630584,
        "Regular Grid Service": -15072.408411700115
    },
    {
        "I=$15k, r=.175": 16689.81352202285,
        "I=$15k, r=.2": 23176.593165138624,
        "I=$25k, r=.175": 6616.120451537485,
        "I=$25k, r=.2": 13233.482196481276,
        "Regular Grid Service": -15248.133373343053
    },
    {
        "I=$15k, r=.175": 16759.13317641382,
        "I=$15k, r=.2": 23286.649619575302,
        "I=$25k, r=.175": 6645.889830817792,
        "I=$25k, r=.2": 13418.634840552364,
        "Regular Grid Service": -15461.093063728938
    },
    {
        "I=$15k, r=.175": 16744.185031724974,
        "I=$15k, r=.2": 23303.41539978752,
        "I=$25k, r=.175": 6633.088919350408,
        "I=$25k, r=.2": 13413.130246797662,
        "Regular Grid Service": -15707.555059388305
    },
    {
        "I=$15k, r=.175": 16835.738160599525,
        "I=$15k, r=.2": 23384.968902606706,
        "I=$25k, r=.175": 6738.838389550157,
        "I=$25k, r=.2": 13512.331570891884,
        "Regular Grid Service": -15867.146797988305
    },
    {
        "I=$15k, r=.175": 17072.639007687485,
        "I=$15k, r=.2": 23577.001244926283,
        "I=$25k, r=.175": 6890.43276694171,
        "I=$25k, r=.2": 13764.42917413875,
        "Regular Grid Service": -16020.956774021306
    },
    {
        "I=$15k, r=.175": 17402.238202131834,
        "I=$15k, r=.2": 24013.188438437657,
        "I=$25k, r=.175": 7254.752238050917,
        "I=$25k, r=.2": 14107.386272818376,
        "Regular Grid Service": -16221.847384878745
    },
    {
        "I=$15k, r=.175": 17974.960664180395,
        "I=$15k, r=.2": 24610.43581367111,
        "I=$25k, r=.175": 7783.691799508665,
        "I=$25k, r=.2": 14756.569050652433,
        "Regular Grid Service": -16385.594510403655
    },
    {
        "I=$15k, r=.175": 18685.60527660783,
        "I=$15k, r=.2": 25444.73962925311,
        "I=$25k, r=.175": 8390.899952986661,
        "I=$25k, r=.2": 15556.2164999782,
        "Regular Grid Service": -16523.685424972235
    },
    {
        "I=$15k, r=.175": 19417.751864433227,
        "I=$15k, r=.2": 26264.57884249785,
        "I=$25k, r=.175": 9105.46358277188,
        "I=$25k, r=.2": 16390.097070104166,
        "Regular Grid Service": -16704.2673490659
    },
    {
        "I=$15k, r=.175": 20132.3027072401,
        "I=$15k, r=.2": 27083.738003860475,
        "I=$25k, r=.175": 9771.520031799326,
        "I=$25k, r=.2": 17161.932660886763,
        "Regular Grid Service": -16951.539810887152
    },
    {
        "I=$15k, r=.175": 20766.063562315572,
        "I=$15k, r=.2": 27821.650047727406,
        "I=$25k, r=.175": 10401.222263066598,
        "I=$25k, r=.2": 17861.21387581772,
        "Regular Grid Service": -17162.119691983808
    },
    {
        "I=$15k, r=.175": 21301.082777124222,
        "I=$15k, r=.2": 28328.748208150304,
        "I=$25k, r=.175": 10906.772197315757,
        "I=$25k, r=.2": 18448.146783138018,
        "Regular Grid Service": -17316.344848755587
    },
    {
        "I=$15k, r=.175": 21564.76958609356,
        "I=$15k, r=.2": 28631.283024867997,
        "I=$25k, r=.175": 11116.459698189194,
        "I=$25k, r=.2": 18805.919902564096,
        "Regular Grid Service": -17492.069810398527
    },
    {
        "I=$15k, r=.175": 21636.872853326466,
        "I=$15k, r=.2": 28790.550788207212,
        "I=$25k, r=.175": 11223.266216857248,
        "I=$25k, r=.2": 18931.5103439436,
        "Regular Grid Service": -17705.02950078441
    },
    {
        "I=$15k, r=.175": 21602.580715805874,
        "I=$15k, r=.2": 28799.47878088123,
        "I=$25k, r=.175": 11198.028548213897,
        "I=$25k, r=.2": 18937.211517752105,
        "Regular Grid Service": -17951.491496443778
    },
    {
        "I=$15k, r=.175": 21724.080245559522,
        "I=$15k, r=.2": 28883.171959873813,
        "I=$25k, r=.175": 11296.726785521527,
        "I=$25k, r=.2": 19058.772899572432,
        "Regular Grid Service": -18111.083235043778
    },
    {
        "I=$15k, r=.175": 21914.926407044128,
        "I=$15k, r=.2": 29108.737810872513,
        "I=$25k, r=.175": 11474.179762929249,
        "I=$25k, r=.2": 19315.33917972754,
        "Regular Grid Service": -18264.89321107678
    },
    {
        "I=$15k, r=.175": 22185.57307762677,
        "I=$15k, r=.2": 29496.41126847134,
        "I=$25k, r=.175": 11792.075299162188,
        "I=$25k, r=.2": 19758.578486980383,
        "Regular Grid Service": -18465.78382193422
    },
    {
        "I=$15k, r=.175": 22666.01397297906,
        "I=$15k, r=.2": 30211.71207631185,
        "I=$25k, r=.175": 12334.788881340359,
        "I=$25k, r=.2": 20404.662790387367,
        "Regular Grid Service": -18629.530947459127
    },
    {
        "I=$15k, r=.175": 23328.362603179907,
        "I=$15k, r=.2": 31018.97473317575,
        "I=$25k, r=.175": 12943.652244457244,
        "I=$25k, r=.2": 21198.462312448002,
        "Regular Grid Service": -18767.621862027707
    },
    {
        "I=$15k, r=.175": 24025.591929133352,
        "I=$15k, r=.2": 31887.502536964017,
        "I=$25k, r=.175": 13648.281377764399,
        "I=$25k, r=.2": 21982.018354513093,
        "Regular Grid Service": -18948.203786121372
    },
    {
        "I=$15k, r=.175": 24811.210444682314,
        "I=$15k, r=.2": 32610.94852642363,
        "I=$25k, r=.175": 14348.498657025484,
        "I=$25k, r=.2": 22791.0027235563,
        "Regular Grid Service": -19195.476247942624
    },
    {
        "I=$15k, r=.175": 25466.214481754738,
        "I=$15k, r=.2": 33325.45300172039,
        "I=$25k, r=.175": 14985.541380074928,
        "I=$25k, r=.2": 23612.91064317159,
        "Regular Grid Service": -19406.05612903928
    },
    {
        "I=$15k, r=.175": 25965.60767992574,
        "I=$15k, r=.2": 33866.25605053463,
        "I=$25k, r=.175": 15464.156462701218,
        "I=$25k, r=.2": 24163.4049454917,
        "Regular Grid Service": -19560.28128581106
    },
    {
        "I=$15k, r=.175": 26197.19493483552,
        "I=$15k, r=.2": 34201.65508000545,
        "I=$25k, r=.175": 15707.6716889333,
        "I=$25k, r=.2": 24451.341225538985,
        "Regular Grid Service": -19736.006247454
    },
    {
        "I=$15k, r=.175": 26299.343168915017,
        "I=$15k, r=.2": 34354.26168067879,
        "I=$25k, r=.175": 15815.849557483121,
        "I=$25k, r=.2": 24602.86043676606,
        "Regular Grid Service": -19948.965937839883
    },
    {
        "I=$15k, r=.175": 26300.86949991151,
        "I=$15k, r=.2": 34343.30576017181,
        "I=$25k, r=.175": 15794.008144665275,
        "I=$25k, r=.2": 24629.286226001375,
        "Regular Grid Service": -20195.42793349925
    },
    {
        "I=$15k, r=.175": 26395.81298284255,
        "I=$15k, r=.2": 34428.019044548484,
        "I=$25k, r=.175": 15878.035800292413,
        "I=$25k, r=.2": 24735.50293703902,
        "Regular Grid Service": -20355.01967209925
    },
    {
        "I=$15k, r=.175": 26570.011669053012,
        "I=$15k, r=.2": 34640.72978086626,
        "I=$25k, r=.175": 16066.49665323931,
        "I=$25k, r=.2": 24990.04107453812,
        "Regular Grid Service": -20508.82964813225
    },
    {
        "I=$15k, r=.175": 26908.53772256636,
        "I=$15k, r=.2": 35023.356447856684,
        "I=$25k, r=.175": 16447.503768562878,
        "I=$25k, r=.2": 25485.01321928509,
        "Regular Grid Service": -20709.72025898969
    },
    {
        "I=$15k, r=.175": 27474.020186120197,
        "I=$15k, r=.2": 35584.60952554023,
        "I=$25k, r=.175": 16915.424498256405,
        "I=$25k, r=.2": 26101.127994903803,
        "Regular Grid Service": -20873.4673845146
    },
    {
        "I=$15k, r=.175": 28208.3265195171,
        "I=$15k, r=.2": 36226.95264327167,
        "I=$25k, r=.175": 17605.086727438033,
        "I=$25k, r=.2": 26807.175793692208,
        "Regular Grid Service": -21011.55829908318
    },
    {
        "I=$15k, r=.175": 28862.553262293226,
        "I=$15k, r=.2": 36976.583116648355,
        "I=$25k, r=.175": 18273.472880638266,
        "I=$25k, r=.2": 27615.332069968594,
        "Regular Grid Service": -21192.140223176844
    },
    {
        "I=$15k, r=.175": 29460.73750674924,
        "I=$15k, r=.2": 37720.405265017616,
        "I=$25k, r=.175": 18940.19013383435,
        "I=$25k, r=.2": 28457.88153544939,
        "Regular Grid Service": -21439.412684998097
    },
    {
        "I=$15k, r=.175": 30032.66373672526,
        "I=$15k, r=.2": 38389.588074349675,
        "I=$25k, r=.175": 19563.010258749888,
        "I=$25k, r=.2": 29227.125768481237,
        "Regular Grid Service": -21649.992566094752
    },
    {
        "I=$15k, r=.175": 30546.810549608323,
        "I=$15k, r=.2": 38962.08774439322,
        "I=$25k, r=.175": 20083.092420275083,
        "I=$25k, r=.2": 29870.939415372683,
        "Regular Grid Service": -21804.21772286653
    },
    {
        "I=$15k, r=.175": 30870.49471706896,
        "I=$15k, r=.2": 39330.22040321743,
        "I=$25k, r=.175": 20313.61575211969,
        "I=$25k, r=.2": 30172.905454861175,
        "Regular Grid Service": -21979.94268450947
    },
    {
        "I=$15k, r=.175": 30912.740785977887,
        "I=$15k, r=.2": 39451.949288151525,
        "I=$25k, r=.175": 20384.894757290735,
        "I=$25k, r=.2": 30283.977112280754,
        "Regular Grid Service": -22192.902374895355
    },
    {
        "I=$15k, r=.175": 30862.110081755123,
        "I=$15k, r=.2": 39460.57596543869,
        "I=$25k, r=.175": 20338.600063575454,
        "I=$25k, r=.2": 30277.083350008208,
        "Regular Grid Service": -22439.364370554722
    },
    {
        "I=$15k, r=.175": 30928.46465779852,
        "I=$15k, r=.2": 39608.50565926164,
        "I=$25k, r=.175": 20420.728702518194,
        "I=$25k, r=.2": 30359.03706895175,
        "Regular Grid Service": -22598.956109154722
    },
    {
        "I=$15k, r=.175": 31085.375623925363,
        "I=$15k, r=.2": 39812.85619553119,
        "I=$25k, r=.175": 20576.25194415457,
        "I=$25k, r=.2": 30678.25551077865,
        "Regular Grid Service": -22752.766085187723
    },
    {
        "I=$15k, r=.175": 31467.46837581663,
        "I=$15k, r=.2": 40246.59493246695,
        "I=$25k, r=.175": 20900.475118975653,
        "I=$25k, r=.2": 31087.024453528324,
        "Regular Grid Service": -22953.656696045164
    },
    {
        "I=$15k, r=.175": 31962.00246784127,
        "I=$15k, r=.2": 40787.72392240977,
        "I=$25k, r=.175": 21370.884093557717,
        "I=$25k, r=.2": 31681.677515538657,
        "Regular Grid Service": -23117.40382157007
    },
    {
        "I=$15k, r=.175": 32609.289661735216,
        "I=$15k, r=.2": 41480.77516170495,
        "I=$25k, r=.175": 22045.35343012471,
        "I=$25k, r=.2": 32487.080299658344,
        "Regular Grid Service": -23255.49473613865
    },
    {
        "I=$15k, r=.175": 33267.259765589835,
        "I=$15k, r=.2": 42228.27911229195,
        "I=$25k, r=.175": 22727.8461909795,
        "I=$25k, r=.2": 33335.58271902839,
        "Regular Grid Service": -23436.076660232316
    },
    {
        "I=$15k, r=.175": 33997.9602069285,
        "I=$15k, r=.2": 43030.36359397804,
        "I=$25k, r=.175": 23410.142709770742,
        "I=$25k, r=.2": 34186.741188431406,
        "Regular Grid Service": -23683.34912205357
    },
    {
        "I=$15k, r=.175": 34583.94876809908,
        "I=$15k, r=.2": 43779.91794485403,
        "I=$25k, r=.175": 24044.366956209768,
        "I=$25k, r=.2": 34895.455616087624,
        "Regular Grid Service": -23893.929003150224
    },
    {
        "I=$15k, r=.175": 35081.18170869966,
        "I=$15k, r=.2": 44378.1789863698,
        "I=$25k, r=.175": 24549.928544832816,
        "I=$25k, r=.2": 35506.305608974166,
        "Regular Grid Service": -24048.154159922004
    },
    {
        "I=$15k, r=.175": 35347.63246279147,
        "I=$15k, r=.2": 44646.64522995578,
        "I=$25k, r=.175": 24901.731526145337,
        "I=$25k, r=.2": 35872.49718097979,
        "Regular Grid Service": -24223.879121564943
    },
    {
        "I=$15k, r=.175": 35405.67582518889,
        "I=$15k, r=.2": 44750.8599352449,
        "I=$25k, r=.175": 24986.998886257024,
        "I=$25k, r=.2": 36006.20671969793,
        "Regular Grid Service": -24436.838811950827
    },
    {
        "I=$15k, r=.175": 35394.666014354916,
        "I=$15k, r=.2": 44818.46708586085,
        "I=$25k, r=.175": 24983.291504784876,
        "I=$25k, r=.2": 36046.1957148032,
        "Regular Grid Service": -24683.300807610194
    },
    {
        "I=$15k, r=.175": 35453.70135354102,
        "I=$15k, r=.2": 44907.13768350636,
        "I=$25k, r=.175": 25061.15545823766,
        "I=$25k, r=.2": 36173.77485257769,
        "Regular Grid Service": -24842.892546210194
    },
    {
        "I=$15k, r=.175": 35635.99759370501,
        "I=$15k, r=.2": 45121.30949253464,
        "I=$25k, r=.175": 25234.77370237006,
        "I=$25k, r=.2": 36394.0129367287,
        "Regular Grid Service": -24996.702522243195
    },
    {
        "I=$15k, r=.175": 35984.499173552635,
        "I=$15k, r=.2": 45545.70964907629,
        "I=$25k, r=.175": 25546.769935098364,
        "I=$25k, r=.2": 36809.59070677649,
        "Regular Grid Service": -25197.593133100636
    },
    {
        "I=$15k, r=.175": 36446.45615806214,
        "I=$15k, r=.2": 46175.20637251503,
        "I=$25k, r=.175": 26027.465107093743,
        "I=$25k, r=.2": 37347.12590607587,
        "Regular Grid Service": -25361.340258625543
    },
    {
        "I=$15k, r=.175": 37100.14671719502,
        "I=$15k, r=.2": 46905.18795060896,
        "I=$25k, r=.175": 26772.62813886712,
        "I=$25k, r=.2": 38109.325584867,
        "Regular Grid Service": -25499.431173194123
    },
    {
        "I=$15k, r=.175": 37668.963862096585,
        "I=$15k, r=.2": 47642.79279077183,
        "I=$25k, r=.175": 27429.806591644105,
        "I=$25k, r=.2": 38904.25628077659,
        "Regular Grid Service": -25680.01309728779
    },
    {
        "I=$15k, r=.175": 38259.02764385617,
        "I=$15k, r=.2": 48504.024029703694,
        "I=$25k, r=.175": 28081.69430330338,
        "I=$25k, r=.2": 39701.60628051498,
        "Regular Grid Service": -25927.28555910904
    },
    {
        "I=$15k, r=.175": 38842.46934495935,
        "I=$15k, r=.2": 49246.06620085594,
        "I=$25k, r=.175": 28708.283890540388,
        "I=$25k, r=.2": 40567.786601423235,
        "Regular Grid Service": -26137.865440205696
    },
    {
        "I=$15k, r=.175": 39304.264574889545,
        "I=$15k, r=.2": 49895.22201024134,
        "I=$25k, r=.175": 29226.87458262747,
        "I=$25k, r=.2": 41164.80635771202,
        "Regular Grid Service": -26292.090596977476
    },
    {
        "I=$15k, r=.175": 39576.34790089964,
        "I=$15k, r=.2": 50211.65671376647,
        "I=$25k, r=.175": 29459.954850717477,
        "I=$25k, r=.2": 41505.15284653481,
        "Regular Grid Service": -26467.815558620416
    },
    {
        "I=$15k, r=.175": 39648.58706784756,
        "I=$15k, r=.2": 50328.3285951374,
        "I=$25k, r=.175": 29540.031227076157,
        "I=$25k, r=.2": 41619.53813705895,
        "Regular Grid Service": -26680.7752490063
    },
    {
        "I=$15k, r=.175": 39629.532650306915,
        "I=$15k, r=.2": 50310.92333376207,
        "I=$25k, r=.175": 29516.54059922778,
        "I=$25k, r=.2": 41620.1605750483,
        "Regular Grid Service": -26927.237244665666
    },
    {
        "I=$15k, r=.175": 39704.19940013706,
        "I=$15k, r=.2": 50412.103003931574,
        "I=$25k, r=.175": 29569.697269836986,
        "I=$25k, r=.2": 41741.75396674105,
        "Regular Grid Service": -27086.828983265666
    },
    {
        "I=$15k, r=.175": 39880.00624990431,
        "I=$15k, r=.2": 50655.05874514148,
        "I=$25k, r=.175": 29764.70910871719,
        "I=$25k, r=.2": 41950.83197034048,
        "Regular Grid Service": -27240.638959298667
    },
    {
        "I=$15k, r=.175": 40201.96361422299,
        "I=$15k, r=.2": 51085.11183225122,
        "I=$25k, r=.175": 30075.464157255694,
        "I=$25k, r=.2": 42376.045633711256,
        "Regular Grid Service": -27441.529570156108
    },
    {
        "I=$15k, r=.175": 40691.92877742605,
        "I=$15k, r=.2": 51610.942099711516,
        "I=$25k, r=.175": 30538.108270576948,
        "I=$25k, r=.2": 42978.459903935756,
        "Regular Grid Service": -27605.276695681016
    },
    {
        "I=$15k, r=.175": 41391.214835931714,
        "I=$15k, r=.2": 52281.25692614087,
        "I=$25k, r=.175": 31183.098994580192,
        "I=$25k, r=.2": 43782.21804491741,
        "Regular Grid Service": -27743.367610249596
    },
    {
        "I=$15k, r=.175": 42112.72414563581,
        "I=$15k, r=.2": 53054.79381847189,
        "I=$25k, r=.175": 31828.79976965278,
        "I=$25k, r=.2": 44466.585193543826,
        "Regular Grid Service": -27923.94953434326
    },
    {
        "I=$15k, r=.175": 42741.784141314994,
        "I=$15k, r=.2": 53883.77516567865,
        "I=$25k, r=.175": 32508.683064658704,
        "I=$25k, r=.2": 45343.95782349652,
        "Regular Grid Service": -28171.221996164513
    },
    {
        "I=$15k, r=.175": 43422.71892434859,
        "I=$15k, r=.2": 54629.8657574968,
        "I=$25k, r=.175": 33186.66314443959,
        "I=$25k, r=.2": 46055.81410761663,
        "Regular Grid Service": -28381.80187726117
    },
    {
        "I=$15k, r=.175": 43937.18098794768,
        "I=$15k, r=.2": 55237.300504173414,
        "I=$25k, r=.175": 33686.065840732175,
        "I=$25k, r=.2": 46646.52111669207,
        "Regular Grid Service": -28536.027034032948
    },
    {
        "I=$15k, r=.175": 44228.491411771225,
        "I=$15k, r=.2": 55513.08275296245,
        "I=$25k, r=.175": 33916.33577138878,
        "I=$25k, r=.2": 46925.47844827285,
        "Regular Grid Service": -28711.751995675888
    },
    {
        "I=$15k, r=.175": 44342.17596580432,
        "I=$15k, r=.2": 55625.95020767064,
        "I=$25k, r=.175": 33948.21804006987,
        "I=$25k, r=.2": 47086.71676369454,
        "Regular Grid Service": -28924.71168606177
    },
    {
        "I=$15k, r=.175": 44313.3625743113,
        "I=$15k, r=.2": 55630.42765886858,
        "I=$25k, r=.175": 33952.15262981081,
        "I=$25k, r=.2": 47111.33585148465,
        "Regular Grid Service": -29171.17368172114
    },
    {
        "I=$15k, r=.175": 44424.03950928297,
        "I=$15k, r=.2": 55713.36861278635,
        "I=$25k, r=.175": 34068.7734898031,
        "I=$25k, r=.2": 47204.96931923348,
        "Regular Grid Service": -29330.76542032114
    },
    {
        "I=$15k, r=.175": 44611.671646732924,
        "I=$15k, r=.2": 55984.028591660135,
        "I=$25k, r=.175": 34209.40889675523,
        "I=$25k, r=.2": 47457.77163990569,
        "Regular Grid Service": -29484.57539635414
    },
    {
        "I=$15k, r=.175": 44892.44626555547,
        "I=$15k, r=.2": 56429.20537549112,
        "I=$25k, r=.175": 34542.002176919865,
        "I=$25k, r=.2": 47890.25596920501,
        "Regular Grid Service": -29685.46600721158
    },
    {
        "I=$15k, r=.175": 45366.3422248355,
        "I=$15k, r=.2": 56979.472817933965,
        "I=$25k, r=.175": 35047.58672677376,
        "I=$25k, r=.2": 48479.75102111819,
        "Regular Grid Service": -29849.213132736488
    },
    {
        "I=$15k, r=.175": 45991.31056401004,
        "I=$15k, r=.2": 57755.89929896274,
        "I=$25k, r=.175": 35677.44236849716,
        "I=$25k, r=.2": 49150.044422100815,
        "Regular Grid Service": -29987.304047305068
    },
    {
        "I=$15k, r=.175": 46663.04553051723,
        "I=$15k, r=.2": 58566.84716736899,
        "I=$25k, r=.175": 36360.307404541825,
        "I=$25k, r=.2": 49895.31464576366,
        "Regular Grid Service": -30167.885971398733
    },
    {
        "I=$15k, r=.175": 47355.42107204973,
        "I=$15k, r=.2": 59339.65776234401,
        "I=$25k, r=.175": 37089.977441890034,
        "I=$25k, r=.2": 50776.90377920533,
        "Regular Grid Service": -30415.158433219985
    },
    {
        "I=$15k, r=.175": 47958.62394096957,
        "I=$15k, r=.2": 60053.55995351369,
        "I=$25k, r=.175": 37663.70307224059,
        "I=$25k, r=.2": 51561.880159183245,
        "Regular Grid Service": -30625.73831431664
    },
    {
        "I=$15k, r=.175": 48523.77294093007,
        "I=$15k, r=.2": 60605.34663706876,
        "I=$25k, r=.175": 38166.97154149966,
        "I=$25k, r=.2": 52175.49297943127,
        "Regular Grid Service": -30779.96347108842
    },
    {
        "I=$15k, r=.175": 48716.485274247854,
        "I=$15k, r=.2": 60941.09164841363,
        "I=$25k, r=.175": 38422.3796461005,
        "I=$25k, r=.2": 52467.931435019826,
        "Regular Grid Service": -30955.68843273136
    },
    {
        "I=$15k, r=.175": 48792.05450924292,
        "I=$15k, r=.2": 61054.769953779825,
        "I=$25k, r=.175": 38524.89969184123,
        "I=$25k, r=.2": 52592.3569612003,
        "Regular Grid Service": -31168.648123117244
    },
    {
        "I=$15k, r=.175": 48760.818907248635,
        "I=$15k, r=.2": 61043.735400620135,
        "I=$25k, r=.175": 38527.08150442137,
        "I=$25k, r=.2": 52614.856372573995,
        "Regular Grid Service": -31415.11011877661
    },
    {
        "I=$15k, r=.175": 48834.01647850126,
        "I=$15k, r=.2": 61171.999186573856,
        "I=$25k, r=.175": 38580.666746187046,
        "I=$25k, r=.2": 52728.924035338816,
        "Regular Grid Service": -31574.70185737661
    },
    {
        "I=$15k, r=.175": 49019.45025224319,
        "I=$15k, r=.2": 61425.34599969381,
        "I=$25k, r=.175": 38760.85483899063,
        "I=$25k, r=.2": 52918.06385700691,
        "Regular Grid Service": -31728.51183340961
    },
    {
        "I=$15k, r=.175": 49366.4449633633,
        "I=$15k, r=.2": 61845.18416766056,
        "I=$25k, r=.175": 39095.68116032473,
        "I=$25k, r=.2": 53310.567472683564,
        "Regular Grid Service": -31929.402444267052
    },
    {
        "I=$15k, r=.175": 49873.96300470615,
        "I=$15k, r=.2": 62409.02868363431,
        "I=$25k, r=.175": 39603.43971508714,
        "I=$25k, r=.2": 53860.19555586608,
        "Regular Grid Service": -32093.14956979196
    },
    {
        "I=$15k, r=.175": 50594.15256695691,
        "I=$15k, r=.2": 63185.26716851555,
        "I=$25k, r=.175": 40291.21264201566,
        "I=$25k, r=.2": 54721.272013207476,
        "Regular Grid Service": -32231.24048436054
    },
    {
        "I=$15k, r=.175": 51293.58165150705,
        "I=$15k, r=.2": 64046.360623469096,
        "I=$25k, r=.175": 40922.6828389299,
        "I=$25k, r=.2": 55546.865750333265,
        "Regular Grid Service": -32411.822408454205
    },
    {
        "I=$15k, r=.175": 51977.60323025838,
        "I=$15k, r=.2": 64918.140601163075,
        "I=$25k, r=.175": 41655.95938479137,
        "I=$25k, r=.2": 56419.15587822232,
        "Regular Grid Service": -32659.094870275458
    },
    {
        "I=$15k, r=.175": 52557.54499641718,
        "I=$15k, r=.2": 65625.01638842051,
        "I=$25k, r=.175": 42264.94688535699,
        "I=$25k, r=.2": 57186.08665596835,
        "Regular Grid Service": -32869.67475137211
    },
    {
        "I=$15k, r=.175": 53022.4563299566,
        "I=$15k, r=.2": 66164.30946301432,
        "I=$25k, r=.175": 42739.23530054529,
        "I=$25k, r=.2": 57751.04306534848,
        "Regular Grid Service": -33023.899908143896
    },
    {
        "I=$15k, r=.175": 53311.103760464706,
        "I=$15k, r=.2": 66493.02078821613,
        "I=$25k, r=.175": 43018.13235324392,
        "I=$25k, r=.2": 58061.22022106199,
        "Regular Grid Service": -33199.624869786836
    },
    {
        "I=$15k, r=.175": 53408.639092767015,
        "I=$15k, r=.2": 66623.94877370563,
        "I=$25k, r=.175": 43072.68589480001,
        "I=$25k, r=.2": 58155.17528486089,
        "Regular Grid Service": -33412.58456017272
    },
    {
        "I=$15k, r=.175": 53369.894654639924,
        "I=$15k, r=.2": 66669.78065603996,
        "I=$25k, r=.175": 43060.110377079276,
        "I=$25k, r=.2": 58157.43838347725,
        "Regular Grid Service": -33659.04655583209
    }
]

  constructor(
    private flaskConnectService: FlaskConnectService,
    private _formBuilder: FormBuilder,
    private cookieService: CookieService
  ) {}
  

  @ViewChild('map', {static: true}) mapElement: any;
  map: google.maps.Map;

  @Output() setAddress: EventEmitter<any> = new EventEmitter();
  @ViewChild('addresstext') addresstext: any;

  @Input() addressType: string;
  @Input('aria-label') ariaLabel: string

  autocompleteInput: string;
  queryWait: boolean;
  address: string;
  coordinates;
  sqrfeet;
  values;
  area;
  measureTool;
  measureEvent;
  heading;
  isLinear = true;
  draw: boolean;
  userData;
  recSq;
  roofArea;
  yes = false;
  no = false;
  hideQuestion = false;
  showConfirmHeading = false;
  modelRun = false;
  confirmSf = false;
  houseSquareFootage;
  year_built;
  graphData;

  goForward(stepper: MatStepper){
    stepper.next();
    this.measureTool.end();
  }

  measureManually(){
    this.confirmSf = false;
    this.measureTool.start();
  }

  reDraw() {
    this.confirmSf = false;
    this.measureTool.end();
  }

  confirmFootage(stepper: MatStepper){
    this.confirmSf = true;
    stepper.next()
    this.roofArea = document.getElementById('square-feet').innerHTML;
    this.measureTool.end()
  }

  ngOnInit(): void {
    this.initMap(); 
    // this.getValues();

    let width = window.innerWidth;

    let maxvalues_array = []

    this.dataset.map(values => {
      maxvalues_array.push(values['I=$25k, r=.2'])
    })

    this.drawGraph(width, 500, this.dataset, 300, 400, maxvalues_array)

    this.searchFormGroup = this._formBuilder.group({
      initCtrl: ['', Validators.required]
    });

    this.drawFormGroup = this._formBuilder.group({
      drawCtrl: ['', Validators.required]
    });
  
    this.firstFormGroup = this._formBuilder.group({
      firstCtrl: ['', Validators.required]
    });
    this.secondFormGroup = this._formBuilder.group({
      secondCtrl: ['', Validators.required]
    });
  }

  geocodeAddress(
    geocoder: google.maps.Geocoder,
    resultsMap: google.maps.Map,
    addressType
  ) {
    geocoder.geocode({ address: addressType}, (results, status) => {
      if (status === "OK") {
        resultsMap.setCenter(results[0].geometry.location);
        let marker = new google.maps.Marker({
          map: resultsMap,
          position: results[0].geometry.location,
        });

        let lat = marker.getPosition().lat()
        let lng = marker.getPosition().lng()

        this.postCoords(lat, lng);

        resultsMap.setZoom(22)
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

  postCoords(lat, lng): void {
    this.userData = {
        "latitude": lat,
        "longitude": lng,
        "address": this.address
    }
    
    this.flaskConnectService.postCoords(this.userData).subscribe(data => {
      if(!data) {
        console.log('no data inputted!')
      } else {
        return 0;
      }
    })
  }

  getFootage(){
    let address = this.address;
    this.flaskConnectService.getFootage(address).subscribe(data => {
      if(!data) {
        console.log('Sorry, we could not find a Project Sunroof Estimate for this address')
      } else {
        console.log(data)
        this.recSq = data
      }
    })
  }
  
  getAddress(place: object) { 
    this.address = place['formatted_address']
  }


  initMap(): void {
    this.draw = true;
    let map: google.maps.Map;

    //set center coordinate
    let myLat= 42.6526;
    let myLng= -73.7562;
    let ALBANY = {lat:myLat, lng:myLng};

    const ALBANY_BOUNDS = {
      north: 42.8,
      south: 42.4,
      east: -73,
      west: -74.3
    };

    //create map
    map = new google.maps.Map(document.getElementById('map') as HTMLElement, {
        zoom: 14,
        center: ALBANY,
        mapTypeId: 'hybrid',
        // restriction: {
        //   latLngBounds: ALBANY_BOUNDS,
        //   strictBounds: false
        // },
        disableDefaultUI: true,
        heading: 90
    });

    map.setTilt(0)

    this.measureTool = new MeasureTool(map, {
      contextMenu: false,
      showSegmentLength: false,
      showTotalDistance: false,
      invertColor: true,
      unit: MeasureTool.UnitTypeId.IMPERIAL
    })

    const polygon = new google.maps.Polygon({
      clickable: true
    })

    this.measureTool.addListener('measure_start', function() {
      polygon.setOptions({clickable: false});
    })

    this.measureTool.addListener('measure_end', function() {
      polygon.setOptions({clickable: true});
    })

    const geocoder = new google.maps.Geocoder();

    (document.getElementById("submit") as HTMLButtonElement).addEventListener(
      "click",
      () => {
        this.geocodeAddress(geocoder, map, this.address);
      }
    );
   
  }

  yesConfirm(){
    this.yes = true;
    this.no = false;

    this.measureTool._area = this.recSq
  }

  noConfirm(){
    this.yes = false;
    this.no = true;
    this.hideQuestion = true;
  }

  calculateHeading(){
    this.confirm = true;
    let start_location = new google.maps.LatLng(this.measureTool._segments[0].start_location.lat, this.measureTool._segments[0].start_location.lng)
    let end_location = new google.maps.LatLng(this.measureTool._segments[0].end_location.lat, this.measureTool._segments[0].end_location.lng)
    this.heading = google.maps.geometry.spherical.computeHeading(start_location, end_location);

    if (this.heading <= -90 && this.heading >= -180) {
      this.heading = -(-180 - this.heading)
    } else if(this.heading >= 90 && this.heading <= 180) {
      this.heading = -180 + this.heading
    } else if(this.heading >= 0 && this.heading < 90) {
      this.heading = (-90 - (90-this.heading))
    } else if(this.heading >= -90 && this.heading <0) {
      this.heading = 90 + (180 - (90 - this.heading))
    }
  }


  getValues(): void {
    this.flaskConnectService.getValues().subscribe(values => {
      this.values = values
      console.log(this.values)
    })
  }

  postClick() {
    this.roofArea = this.roofArea.replace(/,/g, '');
    this.postValues(this.roofArea, this.houseSquareFootage.secondCtrl, this.address, this.heading, this.year_built.firstCtrl)
  }

  postValues(area, houseFootage, address, azimuth, yearBuilt): void {

    this.modelRun = true;
    area = parseInt(area);
    houseFootage = parseInt(houseFootage)
    let values = {
        "panel_area": area,
        "house_footage": houseFootage,
        "address": address,
        "azimuth": azimuth,
        "year_built": yearBuilt
        }

    console.log(values)
    this.flaskConnectService.postValues(values).subscribe(data => {
      if(!data) {
        console.log('no data inputted!')
        this.postError = true;
      } else {
        return 0;
      }
    })

    this.flaskConnectService.runModel(address).subscribe(data => {
      if(!data) {
        console.log('cannot run model!')
        this.postError = true;
      } else {

        const width = window.innerWidth;
        const height = 500;
        const widthsvg = 450;

        if (width >= 600) {
          this.mobile = false;
        } else {
          this.mobile = true;
        }

        let yheight = 250;

        if (width <= 600) {
          yheight = 200;
        }

        let maxvalues_array = []
        for(let i=0; i < data.length; i++){
          maxvalues_array.push(data[i]['I=$25k, r=.2'])
        }

        this.drawGraph(width, height, data, yheight, widthsvg, maxvalues_array)
        
        this.modelRun = false;
      }
    })
  }


  drawGraph(width, height, datapull, yheight, widthsvg, maxvalues_array){

    d3.selectAll("svg").remove();

    this.graphData = datapull;
    console.log(this.graphData)
    console.log('width', width)
    console.log('height', height)
    console.log('height of y', yheight)
    console.log('width of svg', widthsvg) 

    const margin = { top: 20, right: 60, bottom: 20, left: 60};
    height = height - margin.top - margin.bottom;
    width = width - margin.right - margin.left;

    let graphShift = margin.left / 2;

    if(width > 600){
      width = 600;
      graphShift = margin.left / 2;
    }

    let maxValue = d3.max(maxvalues_array)

    if(d3.max(maxvalues_array) < 0){
      maxValue = 0;
    }

    const x = d3.scaleTime().range([0, width - margin.right]);
    x.domain([0, datapull.length]);

    const y = d3.scaleLinear().range([yheight, 0]);
    y.domain([-45000, maxValue]);

    // const area = d3.area()
    // .x(function(d) { return x(parseTime(d.date)); })
    // .y0(height)
    // .y1(function(d) { return height - y(d.cases); })
    // .curve(d3.curveMonotoneX);

    const valueline = d3.line()
    .x(function(d, i) { return x(i); })
    .y(function(d) { return y(d['I=$15k, r=.175']); })
    .curve(d3.curveMonotoneX);

    const valueline2 = d3.line()
    .x(function(d, i) { return x(i); })
    .y(function(d) { return y(d['I=$15k, r=.2']); })
    .curve(d3.curveMonotoneX);

    const valueline3 = d3.line()
    .x(function(d, i) { return x(i); })
    .y(function(d) { return y(d['I=$25k, r=.2']); })
    .curve(d3.curveMonotoneX);

    const valueline4 = d3.line()
    .x(function(d, i) { return x(i); })
    .y(function(d) { return y(d['I=$25k, r=.175']); })
    .curve(d3.curveMonotoneX);

    const valueline5 = d3.line()
    .x(function(d, i) { return x(i); })
    .y(function(d) { return y(d['Regular Grid Service']); })
    .curve(d3.curveMonotoneX);



    const svg = d3.select('.top-wrapper')
                .append('svg')
                .attr('width',  width)
                .attr('height', height - margin.top - margin.bottom)
                .attr('x', 0)
                .attr('y', 0)
                .attr('class', 'projection')
                .append('g')
                .attr('transform', 'translate(' + graphShift + ', 0)')
                .attr('class', 'graph')

    //       svg.append('path')
    //           .datum(datapull)
    //           .attr('class', 'area')
    //           .attr('d', area);

            // Add the x-axis.
        svg.append('g')
            .attr("class", "y-axis")
            .attr("transform", "translate(0," + (margin.top + margin.bottom) + ")")
            .call(d3.axisLeft(y).ticks(8).tickSizeOuter(0).tickFormat(d => (d/1000) + 'K'));

        svg.append('g')
            .attr("class", "x-axis")
            .attr("transform", "translate(0," + (yheight + margin.top + margin.bottom) + ")")
            .call(d3.axisBottom(x).ticks(10).tickSizeOuter(1).tickFormat(d => (d * 100)/100));

        svg.append('path')
          .datum(datapull)
          .attr('class', 'line')
          .attr('fill', 'none')
          .attr('stroke-width', '3px')
          .attr('stroke', '#525564')
          .attr('d', valueline)
          .attr("transform", "translate(0," + (margin.top + margin.bottom) + ")")

        svg.append('path')
          .datum(datapull)
          .attr('class', 'line')
          .attr('fill', 'none')
          .attr('stroke-width', '3px')
          .attr('stroke', '#74828F')
          .attr('d', valueline2)
          .attr("transform", "translate(0," + (margin.top + margin.bottom) + ")")

        svg.append('path')
          .datum(datapull)
          .attr('class', 'line')
          .attr('fill', 'none')
          .attr('stroke-width', '3px')
          .attr('stroke', '#96C0CE')
          .attr('d', valueline3)
          .attr("transform", "translate(0," + (margin.top + margin.bottom) + ")")

        svg.append('path')
          .datum(datapull)
          .attr('class', 'line')
          .attr('fill', 'none')
          .attr('stroke-width', '3px')
          .attr('stroke', '#BEB9B5')
          .attr('d', valueline4)
          .attr("transform", "translate(0," + (margin.top + margin.bottom) + ")")

        svg.append('path')
          .datum(datapull)
          .attr('class', 'line')
          .attr('fill', 'none')
          .attr('stroke-width', '3px')
          .attr('stroke', '#C25B56')
          .attr('d', valueline5)
          .attr("transform", "translate(0," + (margin.top + margin.bottom) + ")")

        const ext_color_domain = [25, 35, 45, 55, 65];

        const ls_w = 20, ls_h = 3;

        const legend = svg.append('g')
        .data(ext_color_domain)
        .attr('class', 'legend');

        legend.append('rect')
        .attr('x', 20)
        .attr('y', yheight - 55)
        .attr('width', ls_w)
        .attr('height', ls_h)
        .style('fill', function (d, i) { return '#525564'; })
        .style('opacity', 0.8);

        legend.append('rect')
          .attr('x', 20)
          .attr('y', yheight - 40)
          .attr('width', ls_w)
          .attr('height', ls_h)
          .style('fill', function (d, i) { return '#74828F'; })
          .style('opacity', 0.8);
          
        legend.append('rect')
        .attr('x', 20)
        .attr('y', yheight - 25)
        .attr('width', ls_w)
        .attr('height', ls_h)
        .style('fill', function (d, i) { return '#96C0CE'; })
        .style('opacity', 0.8);

        legend.append('rect')
        .attr('x', 20)
        .attr('y', yheight - 10)
        .attr('width', ls_w)
        .attr('height', ls_h)
        .style('fill', function (d, i) { return '#BEB9B5'; })
        .style('opacity', 0.8);

        legend.append('rect')
        .attr('x', 20)
        .attr('y', yheight + 5)
        .attr('width', ls_w)
        .attr('height', ls_h)
        .style('fill', function (d, i) { return '#C25B56'; })
        .style('opacity', 0.8);

        legend.append('text')
        .attr('x', 45)
        .attr('y', yheight - 50)
        .attr('font-size', '10px')
        .attr('font-weight', '500')
        .attr('fill', '#525564')
        .text('$15K initial cost, 17.5% efficiency')

        legend.append('text')
          .attr('x', 45)
          .attr('y', yheight - 35)
          .attr('font-size', '10px')
          .attr('font-weight', '500')
          .attr('fill', '#74828F')
          .text('$15K initial cost, 20.0% efficiency');

        legend.append('text')
          .attr('x', 45)
          .attr('y', yheight - 20)
          .attr('font-size', '10px')
          .attr('font-weight', '500')
          .attr('fill', '#96C0CE')
          .text('$25K initial cost, 20% efficiency');

        legend.append('text')
          .attr('x', 45)
          .attr('y', yheight - 5)
          .attr('font-size', '10px')
          .attr('font-weight', '500')
          .attr('fill', '#BEB9B5')
          .text('$25K initial cost, 17.5% efficiency');

        legend.append('text')
          .attr('x', 45)
          .attr('y', yheight + 10)
          .attr('font-size', '10px')
          .attr('font-weight', '500')
          .attr('fill', '#C25B56')
          .text('Regular grid service');
                    
  }

  findArea(){
    console.log(this.measureTool)
  }

  squareFootageSubmit(){
    this.houseSquareFootage = this.secondFormGroup.value;
  }

  yearBuiltSubmit(){
    this.year_built = this.firstFormGroup.value;
  }
}

  





